(()=>{"use strict";var e={127:e=>{e.exports=require("express")},747:e=>{e.exports=require("fs")},605:e=>{e.exports=require("http")},622:e=>{e.exports=require("path")},250:e=>{e.exports=require("react-dom/server")}},t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=require("react");var t=r.n(e);const n=require("react-redux"),s=require("serialize-javascript");var i=r.n(s);const a=require("@reduxjs/toolkit"),o=require("isomorphic-fetch");var c=r.n(o),u=(0,a.createSlice)({name:"person",initialState:{name:"John Doe",age:35,friends:{isLoading:!1,data:[]}},reducers:{ageIncrement:function(e){e.age+=1},ageDecrement:function(e){e.age-=1},setAge:function(e,t){e.age=t.payload},fetchFriendsStart:function(e){e.friends.isLoading=!0},fetchFriendsSuccess:function(e,t){e.friends.isLoading=!1,e.friends.data=t.payload}}}),l=function(){return function(e){var t=u.actions,r=t.fetchFriendsStart,n=t.fetchFriendsSuccess;return e(r()),c()("http://localhost:8080/api/friends").then((function(e){return e.json()})).then((function(e){return e.friends})).then((function(t){return e(n(t))})).then((function(e){return console.log(e)}))}},d=u.actions,f=d.ageIncrement,g=d.ageDecrement,p=d.setAge;const m=u.reducer;var v={ageIncrement:f,ageDecrement:g,setAge:p,fetchFriends:l};const h=(0,n.connect)((function(e){return{name:e.person.name,age:e.person.age,friends:e.person.friends.data,isLoading:e.person.friends.isLoading}}),v,null)((function(r){var n=r.name,s=r.age,i=r.ageIncrement,a=r.ageDecrement,o=r.setAge,c=r.fetchFriends,u=r.friends,l=r.isLoading;return(0,e.useEffect)((function(){u.length||c()}),[u]),t().createElement(t().Fragment,null,t().createElement("p",null,"Hello ",n,", from ","from server","!"),t().createElement("p",null,"Your age is: ",s),t().createElement("p",null,"Is fetching: ",l?"yes, please wait...":"no"),t().createElement("p",null,"Friends: ",u.join(", ")),t().createElement("div",null,t().createElement("button",{onClick:a},"younger"),t().createElement("button",{onClick:i},"older"),t().createElement("button",{onClick:function(){return o(50)}},"age = 50")),t().createElement("img",{src:"/static/kitten.jpg",alt:"kitten"}))}));var E=r(747),x=r(622),b=r(605),S=r(127),j=r(250).renderToString,q=S();q.server=b.createServer(q),q.use("/static",S.static(x.resolve("build/static"))),q.use("/main.css",S.static(x.resolve("build/main.css"))),q.use("/bundle.js",S.static(x.resolve("build/bundle.js"))),q.get("/api/friends",(function(e,t){t.json({friends:["James","Eric","Olivia","Emma","Charlotte"]})})),q.get("*",(function(e,r){var s=x.resolve("build","index.html");E.readFile(s,"utf-8",(function(e,s){e&&(console.log(e),r.status(404).send("Error: 404"));var o=(0,a.configureStore)({reducer:{person:m},preloadedState:void 0}),c=[o.dispatch(p(75)),o.dispatch(l())];Promise.all(c).then((function(){var e=j(t().createElement(n.Provider,{store:o},t().createElement(h,null))),a=s.replace("{{HTML}}",e).replace("{{INITIAL_STATE}}",i()(o.getState(),{isJson:!0}));r.status(200).send(a)}))}))}));var F=process.env.port||8080;q.server.listen(F),console.log("Listening on port ".concat(F))})()})();