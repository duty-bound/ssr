(()=>{"use strict";var e={127:e=>{e.exports=require("express")},747:e=>{e.exports=require("fs")},605:e=>{e.exports=require("http")},622:e=>{e.exports=require("path")},250:e=>{e.exports=require("react-dom/server")}},t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=require("react");var t=n.n(e);const r=require("react-redux"),a=require("@reduxjs/toolkit"),o=require("isomorphic-fetch");var c=n.n(o),i=(0,a.createSlice)({name:"person",initialState:{name:"John Doe",age:35,friends:{isLoading:!1,data:[]}},reducers:{ageIncrement:function(e){e.age+=1},ageDecrement:function(e){e.age-=1},setAge:function(e,t){e.age=t.payload},fetchFriendsStart:function(e){e.friends.isLoading=!0},fetchFriendsSuccess:function(e,t){e.friends.isLoading=!1,e.friends.data=t.payload}}}),s=function(){return function(e){var t=i.actions,n=t.fetchFriendsStart,r=t.fetchFriendsSuccess;return e(n()),c()("http://localhost:8080/api/friends").then((function(e){return e.json()})).then((function(e){return e.friends})).then((function(t){return e(r(t))})).then((function(e){return console.log(e)}))}},u=i.actions,l=u.ageIncrement,m=u.ageDecrement,d=u.setAge;const p=i.reducer,f=require("serialize-javascript");var g=n.n(f);const h=require("react-router-dom"),v=require("react-router-config"),E=(0,h.withRouter)((function(e){var n=e.route,r=e.location,a=null!==(0,h.matchPath)(r.pathname,n);return t().createElement("div",{className:"menuLink"+(a?"active":"")},t().createElement(h.Link,{to:n.linkPath||n.path},n.name))})),x=require("react-router"),q=[{name:"home",path:"/",exact:!0,component:function(){return t().createElement("p",null,"Welcome to the Home page")}},{name:"Cat",path:"/cat",component:function(e){var n=e.route;return t().createElement(t().Fragment,null,t().createElement("p",null,t().createElement("img",{src:"/static/kitten.jpg",alt:"kitten"})),t().createElement("div",null,n.routes.map((function(e){return t().createElement(E,{route:e})}))),(0,v.renderRoutes)(n.routes))},routes:[{name:"Name",path:"/cat",exact:!0,component:function(){return t().createElement("p",null,"I am a kitten and my name is Elixa")}},{name:"Color",path:"cat/color/:color",exact:!0,component:function(){var e=(0,x.useParams)().color;return t().createElement("p",null,"...and I am ",t().createElement("strong",null,e),"!")},linkPath:"/cat/color/orange"}]}];var S={ageIncrement:l,ageDecrement:m,setAge:d,fetchFriends:s};const b=(0,r.connect)((function(e){return{name:e.person.name,age:e.person.age,friends:e.person.friends.data,isLoading:e.person.friends.isLoading}}),S,null)((function(n){var r=n.name,a=n.age,o=n.ageIncrement,c=n.ageDecrement,i=n.setAge,s=n.fetchFriends,u=n.friends,l=n.isLoading;return(0,e.useEffect)((function(){u.length||s()}),[u]),t().createElement(t().Fragment,null,t().createElement("p",null,"Hello ",r,", from ","from server","!"),t().createElement("p",null,"Your age is: ",a),t().createElement("p",null,"Is fetching: ",l?"yes, please wait...":"no"),t().createElement("p",null,"Friends: ",u.join(", ")),t().createElement("div",null,t().createElement("button",{onClick:c},"younger"),t().createElement("button",{onClick:o},"older"),t().createElement("button",{onClick:function(){return i(50)}},"age = 50")),t().createElement("div",null,q.map((function(e){return t().createElement(E,{route:e})}))),(0,v.renderRoutes)(q))}));var k=n(747),L=n(622),j=n(605),F=n(127),I=n(250).renderToString,y=F();y.server=j.createServer(y),y.use("/static",F.static(L.resolve("build/static"))),y.use("/main.css",F.static(L.resolve("build/main.css"))),y.use("/bundle.js",F.static(L.resolve("build/bundle.js"))),y.get("/api/friends",(function(e,t){t.json({friends:["James","Eric","Olivia","Emma","Charlotte"]})})),y.get("*",(function(e,n){var o=L.resolve("build","index.html");k.readFile(o,"utf-8",(function(o,c){o&&(console.log(o),n.status(404).send("Error: 404"));var i=(0,a.configureStore)({reducer:{person:p},preloadedState:void 0}),u=[i.dispatch(d(75)),i.dispatch(s())];Promise.all(u).then((function(){var a=I(t().createElement(r.Provider,{store:i},t().createElement(h.StaticRouter,{location:e.url},t().createElement(b,null)))),o=c.replace("{{HTML}}",a).replace("{{INITIAL_STATE}}",g()(i.getState(),{isJson:!0}));n.status(200).send(o)}))}))}));var P=process.env.port||8080;y.server.listen(P),console.log("Listening on port ".concat(P))})()})();